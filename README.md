# 🛍️ Mall Customer Segmentation Analysis (v2.0)

이 프로젝트는 K-means 클러스터링, 주성분 분석(PCA), 그리고 딥러닝 모델을 활용하여 쇼핑몰 고객 데이터를 심층적으로 분석하고, 고객을 의미 있는 그룹으로 세분화하는 Streamlit 웹 애플리케이션입니다. 분석된 고객 그룹별 특성을 바탕으로 동적인 마케팅 전략 수립을 지원하며, 새로운 고객을 즉시 예측하고 분류하는 고급 기능을 제공합니다.

## ✨ 주요 기능

이 애플리케이션은 단순한 분석을 넘어, 사용자와 상호작용하며 심층적인 인사이트를 제공하는 다양한 기능을 포함합니다.

### 1. 기본 분석
-   **📊 데이터 개요**: 데이터의 기본 정보, 통계 요약, 품질 검사(결측값 확인)를 제공합니다.
-   **🔍 탐색적 데이터 분석 (EDA)**: 고객 속성(성별, 연령, 소득, 지출 점수)의 분포와 변수 간 상관관계를 Plotly를 활용한 인터랙티브 차트로 시각화합니다.

### 2. 클러스터링 분석 (K-Means)
-   **🤖 최적 클러스터 수 자동 추천**: 엘보우 방법(Elbow Method)과 실루엣 점수(Silhouette Score)를 동시에 분석하여 최적의 클러스터 개수(K)를 추천합니다.
-   **🎨 동적 클러스터 프로파일링**:
    -   각 클러스터의 특성(소득, 지출, 연령)을 상대적으로 분석하여 **'프리미엄 청년층', '절약형 중년층'** 등 의미 있는 라벨을 동적으로 생성합니다.
    -   클러스터 특성에 따라 일관된 색상을 자동 할당하여 시각적 구분을 명확히 합니다.
-   **📈 고급 시각화**:
    -   Plotly를 이용한 3D/2D 인터랙티브 산점도.
    -   Matplotlib을 이용한 상세 클러스터 맵 (클러스터별 타원 영역, 중심점, 동적 라벨 표시).
-   **📖 동적 해석 가이드**: 현재 분석된 클러스터의 통계적 기준과 각 그룹의 상세 특성을 설명하는 가이드를 동적으로 생성합니다.

### 3. 주성분 분석 (PCA)
-   **🔬 차원 축소 및 시각화**: 3차원 데이터를 2차원으로 압축하여 고객 분포의 숨겨진 패턴을 시각화합니다.
-   **📊 주성분 심층 분석**:
    -   각 주성분의 **설명 가능한 분산 비율**과 **누적 기여율**을 분석합니다.
    -   **Biplot**을 통해 원래 변수들이 주성분 공간에 미치는 영향을 시각적으로 파악합니다.
-   **🔄 클러스터링 결과와 비교**: PCA로 축소된 공간에서의 클러스터링 결과와 원본 데이터의 클러스터링 결과를 비교하여 차원 축소의 효과를 검증합니다.

### 4. 딥러닝 분석 (TensorFlow & Keras)
-   **🧠 지도 학습으로의 전환**: 클러스터링 결과를 '정답'으로 사용하여 새로운 고객을 예측하는 딥러닝 모델을 훈련합니다.
-   **🎯 분류 모델 (Classification)**:
    -   UI를 통해 하이퍼파라미터(은닉층, 드롭아웃 등)를 실시간으로 조정하며 모델을 설계합니다.
    -   **상태 유지(Stateful) 훈련**: 훈련된 모델을 세션에 저장하여 재훈련 없이 예측, 평가 등 다양한 작업을 수행할 수 있습니다.
    -   훈련 과정을 실시간 진행률 표시줄과 함께 시각화합니다.
    -   혼동 행렬(Confusion Matrix), 분류 리포트 등 상세한 모델 성능을 평가합니다.
-   **🔄 오토인코더 (Autoencoder)**:
    -   PCA의 비선형 버전으로, 더 복잡한 데이터 패턴을 학습하여 차원을 축소합니다.
    -   PCA 결과와 시각적으로 비교하여 성능을 분석합니다.
-   **🔀 두 모델 종합 비교**:
    -   '분류 모델'과 '오토인코더'의 성능을 **레이더 차트**와 상세 분석표로 비교합니다.
    -   비즈니스 상황에 맞는 최적의 모델을 추천하고, 실행 가능한 액션 플랜을 제안합니다.

### 5. 예측 및 전략 수립
-   **🔮 실시간 고객 예측**:
    -   새로운 고객의 정보를 입력하면, 훈련된 **K-means 모델** 또는 **딥러닝 분류 모델**을 사용하여 어떤 클러스터에 속할지 즉시 예측합니다.
    -   예측 결과와 함께 신뢰도, 유사 고객 프로필 정보를 제공합니다.
-   **📈 동적 마케팅 전략**:
    -   분석된 클러스터 프로필을 기반으로 각 그룹에 최적화된 마케팅 전략, 채널, 우선순위를 동적으로 생성하여 제안합니다.

## 🚀 실행 방법

1.  **저장소 복제 (이미 하셨다면 생략):**
    ```bash
    git clone https://github.com/greenkey20/customer-segmentation-analysis.git
    cd customer-segmentation-analysis
    ```

2.  **가상 환경 생성 및 활성화 (권장):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # macOS/Linux
    # venv\Scripts\activate    # Windows
    ```

3.  **필요한 라이브러리 설치:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Streamlit 애플리케이션 실행:**
    ```bash
    streamlit run customer_segmentation_app.py
    ```
    실행 후 웹 브라우저에서 `http://localhost:8501` 주소로 접속합니다.

## 📝 한글 폰트 설정 (macOS)

`customer_segmentation_app.py` 내의 `setup_korean_font_for_streamlit` 함수는 macOS 환경에서 한글 폰트를 자동으로 찾아 설정하려고 시도합니다. 다른 OS 환경에서는 해당 함수를 수정하거나 시스템에 맞는 폰트 설정을 추가해야 할 수 있습니다.

## 📊 데이터 출처

이 애플리케이션은 기본적으로 다음 URL의 "Mall Customer Segmentation Dataset"을 사용합니다:
`https://raw.githubusercontent.com/tirthajyoti/Machine-Learning-with-Python/master/Datasets/Mall_Customers.csv`

데이터 로드에 실패할 경우, 애플리케이션 내에서 샘플 데이터를 생성하여 데모를 진행합니다.

## 🛠️ 기술 스택

-   **언어**: Python
-   **웹 프레임워크**: Streamlit
-   **데이터 분석**: Pandas, NumPy
-   **머신러닝**: Scikit-learn (KMeans, StandardScaler, PCA, silhouette_score)
-   **딥러닝**: TensorFlow, Keras
-   **시각화**: Matplotlib, Seaborn, Plotly Express, Plotly Graph Objects

## 🔮 향후 개선 사항

-   **코드 구조 리팩토링**: 현재 단일 파일 구조를 멀티페이지 앱 구조로 전환하여 유지보수성 및 확장성 향상
-   **사용자 데이터 업로드 기능**: 사용자가 자신의 CSV 파일을 업로드하여 분석할 수 있는 기능 추가
-   **다양한 클러스터링 알고리즘**: DBSCAN, 계층적 클러스터링 등 다른 알고리즘 추가 옵션 제공
-   **보고서 생성**: 분석 결과를 PDF 또는 HTML 파일로 다운로드하는 기능
-   **모델 배포**: 훈련된 모델을 저장하고 불러와서 재사용하는 기능 강화

---

이 프로젝트가 고객 세분화 분석에 도움이 되기를 바랍니다!

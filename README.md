# 🛍️ Mall Customer Segmentation Analysis

K-means 클러스터링과 딥러닝을 활용한 쇼핑몰 고객 세분화 분석 도구입니다.

## 🎯 프로젝트 개요

이 프로젝트는 고객의 연령, 소득, 지출 패턴을 분석하여 의미 있는 고객 세그먼트를 발견하고, 각 세그먼트에 맞는 맞춤형 마케팅 전략을 제공합니다. 단일 파일에서 시작된 프로젝트를 체계적인 모듈 구조로 리팩토링하여 확장성과 유지보수성을 대폭 향상시켰습니다.

## ✨ 주요 기능

### 📊 데이터 분석 기능
- **데이터 개요**: 기본 통계 및 데이터 품질 검사, 결측값 및 이상치 탐지
- **탐색적 데이터 분석**: 고객 특성별 분포, 상관관계 분석, 인터랙티브 시각화
- **클러스터링 분석**: K-means 알고리즘을 통한 고객 세분화, 최적 클러스터 수 자동 결정
- **주성분 분석**: PCA를 통한 차원 축소 및 패턴 발견, 설명 가능한 분산 분석

### 🧠 머신러닝 기능
- **딥러닝 분석**: 신경망 분류 모델과 오토인코더를 활용한 고급 분석
- **고객 예측**: 새로운 고객의 세그먼트 예측 및 신뢰도 측정
- **모델 성능 비교**: 다양한 알고리즘 간 성능 비교 및 최적 모델 선택

### 📈 비즈니스 인텔리전스
- **마케팅 전략**: 세그먼트별 맞춤형 마케팅 전략 및 ROI 시뮬레이션
- **실시간 인사이트**: 고객 데이터 입력 시 즉시 분석 결과 제공
- **전략 효과 예측**: 마케팅 캠페인별 예상 성과 및 투자 대비 효과 계산

## 🏗️ 프로젝트 구조 (v2.0 모듈화 완료)

```
customer-segmentation/
├── 📚 메인 애플리케이션
│   ├── app.py                       # 🚀 새로운 메인 애플리케이션 (모듈화 버전)
│   └── customer_segmentation_app.py # 📁 기존 파일 (백업용으로 유지)
│
├── ⚙️ 설정 및 구성
│   ├── config/
│   │   ├── __init__.py
│   │   └── settings.py              # 전역 설정 관리 (색상, 폰트, 모델 파라미터 등)
│   └── requirements.txt             # 📦 의존성 패키지
│
├── 🔧 핵심 비즈니스 로직
│   └── core/
│       ├── __init__.py
│       ├── data_processing.py       # 데이터 로딩, 전처리, 검증
│       ├── clustering.py            # 클러스터링 분석 로직 (K-means, 실루엣 분석)
│       └── deep_learning_models.py  # 딥러닝 모델 관리 (분류, 오토인코더)
│
├── 🛠️ 유틸리티 및 공통 기능
│   └── utils/
│       ├── __init__.py
│       └── font_manager.py          # 한글 폰트 관리 및 시각화 최적화
│
├── 📄 UI 페이지 모듈
│   └── app_modules/
│       ├── __init__.py
│       ├── data_overview.py         # 데이터 개요 페이지
│       ├── exploratory_analysis.py  # 탐색적 분석 페이지
│       ├── clustering_analysis.py   # 클러스터링 분석 페이지
│       ├── pca_analysis.py          # 주성분 분석 페이지
│       ├── deep_learning_analysis.py # 딥러닝 분석 페이지
│       ├── customer_prediction.py   # 고객 예측 페이지
│       └── marketing_strategy.py    # 마케팅 전략 페이지
│
├── 🧪 테스트 및 검증
│   └── test/
│       └── test_modules.py          # 모듈 임포트 및 기본 기능 검증
│
├── 📊 데이터 및 문서
│   ├── Mall_Customers.csv          # 고객 데이터셋
│   ├── README.md                   # 프로젝트 설명서
│   ├── MIGRATION_CHECKLIST.md      # 리팩토링 체크리스트
│   └── LICENSE                     # 라이선스 정보
│
└── 🗂️ 개발 환경
    ├── .streamlit/                 # Streamlit 설정
    ├── .git/                       # Git 버전 관리
    ├── .gitignore                  # Git 제외 파일 목록
    ├── venv/                       # 가상 환경 (로컬)
    └── __pycache__/                # Python 캐시 (자동 생성)
```

## 🚀 시작하기

### 1. 환경 설정

```bash
# 저장소 클론
git clone <repository-url>
cd customer-segmentation

# 가상 환경 생성 (권장)
python -m venv venv

# 가상 환경 활성화
source venv/bin/activate  # macOS/Linux
# 또는
venv\Scripts\activate     # Windows

# 필요한 패키지 설치
pip install -r requirements.txt
```

### 2. 모듈 연결성 테스트 (선택사항)

애플리케이션 실행 전에 모든 모듈이 정상적으로 연결되어 있는지 확인할 수 있습니다.

```bash
# 모듈 임포트 및 기본 기능 테스트
python test/test_modules.py
```

성공적으로 완료되면 다음과 같은 메시지가 표시됩니다:
```
🎉 모든 테스트 통과! 애플리케이션을 실행할 준비가 완료되었습니다.
```

### 3. 애플리케이션 실행

#### 🆕 새로운 모듈화 버전 (권장)
```bash
streamlit run app.py
```

#### 📁 기존 버전 (백업용)
```bash
streamlit run customer_segmentation_app.py
```

### 4. 브라우저에서 접속

애플리케이션이 시작되면 자동으로 브라우저가 열리거나, 다음 주소로 접속하세요:
```
http://localhost:8501
```

## 🎮 사용 가이드

### 📋 권장 분석 순서

**초급 사용자를 위한 단계별 가이드**:

1. **📊 데이터 개요** - 데이터셋의 기본 정보와 품질을 확인합니다. 전체 고객 수, 각 변수의 분포, 결측값 유무를 파악하세요.

2. **🔍 탐색적 데이터 분석** - 고객 특성별 분포와 패턴을 파악합니다. 연령대별 소득 분포, 성별에 따른 지출 패턴 등을 살펴보세요.

3. **🎯 클러스터링 분석** - 최적 클러스터 수를 결정하고 고객을 세분화합니다. 엘보우 방법과 실루엣 점수를 참고하여 의미 있는 그룹을 만드세요.

4. **🔬 주성분 분석** - 차원 축소를 통한 데이터 구조를 이해합니다. 고객 데이터의 주요 변동 요인을 시각적으로 확인하세요.

5. **🧠 딥러닝 분석** - 고급 모델을 통한 패턴 학습을 수행합니다. 신경망 분류기와 오토인코더의 성능을 비교해보세요.

6. **🔮 고객 예측** - 새로운 고객의 세그먼트 예측을 테스트합니다. 다양한 고객 프로필을 입력하여 모델의 예측 능력을 확인하세요.

7. **📈 마케팅 전략** - 비즈니스 활용 방안 및 ROI 시뮬레이션을 수행합니다. 각 세그먼트별 마케팅 예산 배분과 예상 효과를 계산하세요.

### 🔧 고급 기능

**세션 상태 관리**: 페이지 간 이동 시에도 설정 값(클러스터 개수, 모델 파라미터 등)이 유지됩니다. 분석 중간에 다른 페이지를 확인하고 돌아와도 작업을 이어갈 수 있습니다.

**동적 라벨링**: 클러스터의 특성(평균 소득, 지출 패턴 등)을 분석하여 "프리미엄 고객", "절약형 고객" 등의 의미 있는 라벨을 자동으로 생성합니다.

**모델 비교**: 신경망 분류 모델과 오토인코더의 성능을 다양한 지표(정확도, 손실값, 시각화 품질)로 비교할 수 있습니다.

**ROI 시뮬레이션**: 마케팅 캠페인의 예산, 예상 반응률, 고객 생애 가치를 입력하여 투자 대비 효과를 계산합니다.

**스크롤 최적화**: 페이지 전환 시 자동으로 최상단으로 이동하여 사용자 경험을 향상시킵니다.

## 🛠️ 기술 스택

### 프론트엔드 및 시각화
- **Streamlit 1.28+**: 웹 애플리케이션 프레임워크, 실시간 상호작용 지원
- **Plotly 5.0+**: 인터랙티브 시각화, 3D 플롯 및 애니메이션 지원
- **Matplotlib & Seaborn**: 정적 시각화 및 통계 그래프

### 데이터 처리 및 분석
- **Pandas 2.0+**: 데이터 조작 및 분석, 대용량 데이터 최적화
- **NumPy 1.24+**: 수치 계산 및 배열 연산 최적화
- **Scikit-learn 1.3+**: 전통적인 머신러닝 알고리즘

### 딥러닝 및 고급 분석
- **TensorFlow 2.13+**: 딥러닝 모델 구축 및 훈련
- **Keras**: 고수준 신경망 API, 빠른 프로토타이핑
- **SciPy**: 고급 수치 계산 및 최적화

### 분석 기법 상세

**클러스터링**: K-means 알고리즘을 사용하여 고객을 유사한 특성을 가진 그룹으로 분류합니다. 엘보우 방법과 실루엣 분석을 통해 최적의 클러스터 수를 자동으로 결정합니다.

**주성분 분석(PCA)**: 고차원 데이터를 2차원 또는 3차원으로 축소하여 시각화합니다. 각 주성분이 설명하는 분산의 비율을 통해 데이터의 주요 변동 요인을 파악할 수 있습니다.

**신경망 분류**: 다층 퍼셉트론을 사용하여 고객의 특성으로부터 세그먼트를 예측합니다. 드롭아웃과 조기 종료를 통해 과적합을 방지합니다.

**오토인코더**: 비선형 차원 축소를 수행하여 PCA보다 복잡한 패턴을 학습할 수 있습니다. 인코더-디코더 구조를 통해 데이터의 압축된 표현을 학습합니다.

## 📊 데이터셋 정보

### 기본 정보
- **데이터 출처**: Mall Customer Segmentation Dataset (Kaggle)
- **고객 수**: 200명
- **수집 기간**: 1년간의 고객 행동 데이터
- **데이터 품질**: 결측값 없음, 이상치 최소화된 정제된 데이터

### 변수 설명

**CustomerID**: 고객 고유 식별자 (1-200), 분석에서는 제외됩니다.

**Gender**: 성별 정보 (Male: 112명, Female: 88명), 성별에 따른 소비 패턴 차이 분석에 활용됩니다.

**Age**: 연령 (18-70세), 연령대별 클러스터링과 마케팅 전략 수립의 핵심 변수입니다.

**Annual Income (k$)**: 연간 소득 (15-137천 달러), 고객의 구매력을 나타내는 가장 중요한 경제적 지표입니다.

**Spending Score (1-100)**: 지출 점수, 몰에서의 소비 성향과 빈도를 종합한 지표로, 1점(최저 소비)부터 100점(최고 소비)까지의 범위를 가집니다.

## 🎯 비즈니스 가치

### 직접적 효과

**개인화 마케팅**: 고객 세그먼트별 맞춤 메시지와 상품 추천으로 반응률을 평균 2-3배 향상시킬 수 있습니다. 예를 들어, 고소득-고지출 그룹에게는 프리미엄 상품을, 저소득-저지출 그룹에게는 할인 상품을 중점적으로 마케팅할 수 있습니다.

**자원 최적화**: 한정된 마케팅 예산을 고가치 고객 그룹에 집중 투입하여 ROI를 극대화합니다. 시뮬레이션 결과, 무차별 마케팅 대비 30-50% 높은 투자 효율을 달성할 수 있습니다.

**신규 고객 관리**: 새로운 고객이 등록하는 즉시 세그먼트를 분류하여 첫 구매까지의 시간을 단축하고 초기 대응 품질을 개선합니다.

### 간접적 효과

**데이터 기반 의사결정**: 경험과 직감에 의존하던 기존 방식에서 벗어나 객관적인 데이터 분석을 통한 전략 수립이 가능합니다.

**고객 이해도 증진**: 표면적으로 드러나지 않던 고객 간의 유사성과 차이점을 발견하여 새로운 비즈니스 기회를 창출할 수 있습니다.

**마케팅 효율성**: 세그먼트별 특성을 이해함으로써 메시지 전달 방식, 채널 선택, 타이밍 등을 최적화할 수 있습니다.

## 🔄 모듈화 아키텍처의 장점

### 1. 유지보수성 향상

**기능별 분리**: 각 분석 기능이 독립적인 파일로 분리되어 있어, 특정 기능에 문제가 생기거나 개선이 필요할 때 해당 모듈만 수정하면 됩니다. 예를 들어, 클러스터링 알고리즘을 개선하려면 `core/clustering.py`만 수정하면 됩니다.

**의존성 최소화**: 각 모듈이 명확한 인터페이스를 통해 소통하므로, 한 모듈의 내부 구현을 변경해도 다른 모듈에 미치는 영향을 최소화할 수 있습니다.

**버그 격리**: 문제가 발생했을 때 해당 기능과 관련된 모듈에서만 원인을 찾으면 되므로 디버깅 시간이 대폭 단축됩니다.

### 2. 확장성

**새 기능 추가**: 새로운 분석 페이지나 머신러닝 모델을 추가할 때, 기존 코드를 수정하지 않고 새로운 모듈만 만들면 됩니다. 예를 들어, 시계열 분석을 추가하려면 `core/time_series.py`와 `app_modules/time_series_analysis.py`만 만들면 됩니다.

**설정 관리**: `config/settings.py`에서 모든 설정값을 중앙집중 관리하므로, 색상 팔레트나 모델 파라미터 변경이 전체 애플리케이션에 즉시 반영됩니다.

**모델 교체**: 새로운 딥러닝 프레임워크나 알고리즘으로 교체할 때도 해당 모듈만 수정하면 되므로 기술 스택 업그레이드가 용이합니다.

### 3. 협업 효율성

**역할 분담**: 팀원별로 서로 다른 모듈을 담당할 수 있어 병렬 개발이 가능합니다. 한 명은 UI를 담당하고, 다른 한 명은 머신러닝 모델을 개발할 수 있습니다.

**Git 충돌 최소화**: 파일이 기능별로 분리되어 있어 여러 명이 동시에 작업해도 코드 충돌이 거의 발생하지 않습니다.

**코드 리뷰**: 변경사항이 특정 모듈에 국한되므로 리뷰어가 해당 기능에만 집중할 수 있어 리뷰 품질이 향상됩니다.

### 4. 테스트 및 품질 관리

**단위 테스트**: 각 모듈별로 독립적인 테스트를 작성할 수 있어 코드 품질을 체계적으로 관리할 수 있습니다.

**통합 테스트**: `test/test_modules.py`와 같은 통합 테스트를 통해 전체 시스템의 연결성을 보장할 수 있습니다.

**성능 모니터링**: 특정 모듈의 성능 병목을 쉽게 식별하고 개선할 수 있습니다.

## 🔮 향후 개발 계획

### 단기 (1-2개월)
- **지도학습 모델 추가**: 현재 데이터를 활용한 회귀 및 분류 문제 구현
- **더 큰 데이터셋 지원**: 10만 건 이상의 대용량 데이터 처리 최적화
- **모델 성능 모니터링**: 실시간 모델 성능 추적 대시보드
- **데이터 검증 강화**: 입력 데이터의 품질 검사 및 이상치 처리 자동화

### 중기 (3-6개월)
- **시계열 분석**: 고객의 시간에 따른 행동 변화 패턴 분석
- **A/B 테스트 시뮬레이션**: 마케팅 전략의 효과를 사전에 시뮬레이션
- **고객 생애주기 분석**: 신규 고객부터 이탈까지의 전체 여정 분석
- **API 개발**: 외부 시스템과의 연동을 위한 RESTful API 구축

### 장기 (6-12개월)
- **실시간 추천 시스템**: 고객 행동에 따른 실시간 상품 추천
- **고급 딥러닝 모델**: Transformer, Graph Neural Network 등 최신 기법 도입
- **클라우드 배포**: AWS/GCP를 활용한 스케일러블 배포 환경 구축
- **멀티 테넌트 지원**: 여러 회사가 동시에 사용할 수 있는 SaaS 플랫폼

## 🧪 테스트 및 검증

### 모듈 테스트 수행

프로젝트의 안정성을 확인하기 위해 다음 테스트를 정기적으로 수행할 수 있습니다:

```bash
# 전체 모듈 연결성 테스트
python test/test_modules.py

# 개별 모듈 테스트 (개발 중)
python -m pytest test/ -v

# 코드 품질 검사 (개발 중)
flake8 core/ utils/ config/
```

### 테스트 커버리지

현재 테스트는 다음 영역을 커버합니다:
- 모든 모듈의 임포트 가능성 검증
- 핵심 클래스의 인스턴스 생성 검증
- 기본 설정값 로딩 검증

향후 다음 테스트가 추가될 예정입니다:
- 각 분석 기능의 정확성 검증
- 경계값 및 예외 상황 처리 테스트
- 성능 벤치마크 테스트

## 🤝 기여하기

이 프로젝트는 교육 목적과 실무 활용을 위해 지속적으로 개선되고 있습니다. 다음과 같은 방식으로 기여할 수 있습니다:

### 코드 기여
1. 저장소를 포크합니다 (`git fork`)
2. 기능별 브랜치를 생성합니다 (`git checkout -b feature/amazing-feature`)
3. 변경사항을 커밋합니다 (`git commit -m 'Add amazing feature'`)
4. 브랜치에 푸시합니다 (`git push origin feature/amazing-feature`)
5. Pull Request를 생성합니다

### 이슈 및 제안
- 버그 리포트: 문제 상황과 재현 방법을 상세히 기술
- 기능 제안: 구체적인 사용 사례와 예상 효과 설명
- 문서 개선: 사용자 관점에서의 개선 사항 제안

### 코딩 컨벤션
- Python PEP 8 스타일 가이드 준수
- 함수와 클래스에 명확한 docstring 작성
- 한글 주석으로 복잡한 로직 설명
- 새로운 기능 추가 시 해당 테스트 케이스도 함께 작성

## 📚 참고 자료

### 학습 자료
- [Scikit-learn 클러스터링 가이드](https://scikit-learn.org/stable/modules/clustering.html)
- [TensorFlow 공식 튜토리얼](https://www.tensorflow.org/tutorials)
- [Streamlit 개발 문서](https://docs.streamlit.io/)

### 관련 논문 및 연구
- K-means 클러스터링 최적화 기법
- 고객 세분화에서의 딥러닝 활용 사례
- 마케팅 ROI 측정 및 예측 모델

## 📝 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 상업적 용도를 포함하여 자유롭게 사용, 수정, 배포할 수 있습니다. 자세한 내용은 `LICENSE` 파일을 참조하세요.

## 📞 문의 및 지원

### 기술 지원
프로젝트 사용 중 문제가 발생하거나 질문이 있으시면 GitHub Issues를 통해 연락해 주세요. 다음 정보를 포함해 주시면 더 빠른 지원이 가능합니다:
- 운영체제 및 Python 버전
- 설치된 패키지 버전 (`pip list` 결과)
- 오류 메시지 전체 내용
- 문제 재현 단계

### 교육 및 컨설팅
이 도구를 교육 목적으로 활용하거나 실무에 적용하고 싶으시다면 Issues를 통해 문의해 주세요.

---

**🎉 Happy Analyzing!** 

이 도구가 여러분의 고객 분석과 마케팅 전략 수립에 도움이 되기를 바랍니다. 데이터 과학의 실무 역량 향상과 비즈니스 인사이트 발견의 즐거움을 함께 경험해 보세요!

**v2.0 업데이트 하이라이트**: 완전한 모듈화 구조로 전환하여 확장성과 유지보수성이 대폭 향상되었습니다. 이제 새로운 분석 기법을 쉽게 추가하고, 팀 단위 개발이 가능하며, 엔터프라이즈 환경에서도 안정적으로 활용할 수 있습니다.